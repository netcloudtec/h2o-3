// Generated by CoffeeScript 1.5.0
(function() {
  var module;

  module = angular.module('h2o.directives.inspect');

  module.directive("dataservicespinner", function(InspectDataService) {
    return {
      restrict: "E",
      template: '<div class="spinner-wrapper"><div class="spinner"><i class="icon-spinner icon-spin icon-large"></i><button class="retry-button">Retry <i class="icon-repeat"></i></button></div></div>',
      replace: true,
      link: function(scope, element, attrs) {
        var jqElement, jqRetryButton, jqSpinner, updateElement;
        jqElement = $(element);
        jqSpinner = jqElement.find("i.icon-spinner");
        jqRetryButton = jqElement.find("button");
        jqRetryButton.click(function() {
          return InspectDataService.fetch();
        });
        updateElement = function() {
          if (InspectDataService.status === HTTP_STATUS.loading || InspectDataService.status === HTTP_STATUS.error) {
            jqElement.stop().fadeIn();
          } else {
            jqElement.stop().fadeOut();
          }
          if (InspectDataService.status === HTTP_STATUS.error) {
            jqSpinner.hide();
            return jqRetryButton.show();
          } else {
            jqSpinner.show();
            return jqRetryButton.hide();
          }
        };
        return scope.$watch('InspectDataService.status', updateElement);
      }
    };
  });

}).call(this);
